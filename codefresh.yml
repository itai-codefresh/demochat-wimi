version: '1.0'
steps:
  build_step:
    title: Build
    type: build
    dockerfile: Dockerfile
    image_name: containers101/demochat
    tag: '${{CF_BRANCH}}'

  unit_tests:
    title: Unit Tests
    image: ${{build_step}}
    fail_fast: false
    working-directory : /usr/src/app
    commands:
      - npm test

  push_to_registry:
    title: Push To Registry
    type: push
    candidate: ${{build_step}}
    tag: ${{CF_BRANCH}}
