version: '1.0'
steps:

  unit_tests:
    title: Unit Tests
    image: alpine:latest
    fail_fast: false
    commands:
      - export KEY=myval
      - cf_export SOME=alpine:latest KEY 
         
  unit_testss:
    title: Unit Tests
    image: ${{SOME}}
    fail_fast: false
    environment:
      - SOME=myvalue
      - SOME1=myvalll
    commands:
      - echo $SOME
      - echo $SOME1
      - cat ${{CF_VOLUME_PATH}}/env_vars_to_export
    
  launch_composition:
    title: Launch Composition
    type: composition
    composition: docker-compose.yml
    environment_name: 'staging'
    entry_point: demochat
    composition_candidates:
      test_service:
        image: ${{SOME}}
        command: echo $KEY
    composition_variables:
      - KEY=value
